# M5StickC PLUS2 Rust

Rust example project for the [M5StickC PLUS2](https://shop.m5stack.com/products/m5stickc-plus2-esp32-mini-iot-development-kit).

Uses [ratatui](https://ratatui.rs) (via [mousefood](https://github.com/j-g00da/mousefood) backend) for UI rendering on the ST7789 display.

In addition to building for hardware, you can run a desktop simulator.

The `app` crate is hardware-agnostic and receives all input via Embassy event channels.

## Quick Start

```bash
# hardware
source ~/export-esp.sh
# cargo +esp run --package stick --release
cargo +esp run --package stick --release --target xtensa-esp32-none-elf

# simulator
# https://crates.io/crates/embedded-graphics-simulator
brew install sdl2
export LIBRARY_PATH="$LIBRARY_PATH:$(brew --prefix)/lib"
cargo run --package sim
```

> [!CAUTION]
> I haven't figured out how to configure rust-analyzer for both std/no_std packages simultaneously. Current workaround: comment out `.zed/settings.json` when working on non-ESP (non-stick) packages.

Project generated by [esp-generate (v1.1.0)](https://github.com/esp-rs/esp-generate)

## References

- https://docs.m5stack.com/en/core/M5StickC%20PLUS2
- https://github.com/tana/rust-m5stickc-plus-test/blob/main/src/main.rs
